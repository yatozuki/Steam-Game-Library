<%- include('partials/header.ejs') %>
<%- include('partials/navbar.ejs') %>

<div class="container">
    <% games.forEach(game => { %>
    <li class="item">
        <div class="content">
            <h2 class="game-title"><%= game.name %></h2>
        </div>

        <div class="content">
            <img class="game-image" src="<%= game.header_image %>" width="200">

        </div>
        <div class="content">
            <% if (game.is_free) { %>
            <p class="game-price">Free</p>

            <% } else if (game.price_overview) { %>
                <% if (game.price_overview.discount_percent > 0) { %>
                    <p class="game-price"><span>-<%= game.price_overview.discount_percent %>%</span> <%= game.price_overview.final_formatted %></p>
                <% } else { %>
                    <p class="game-price"><%= game.price_overview.final_formatted %></p>
                <% } %>
            <% } else { %>
            <p class="game-price">N/A</p>
            <% } %>

        </div>
    </li>
    <% }) %>
</div>



<div class="pagination">
    <% if (hasPrevious) { %>
    <a class="btn" href="/?page=<%= currentPage - 1 %>">&lt;</a>
    <% } %>

    <% if (currentPage > 3) { %>
    <a class="btn" href="/?page=1">1</a>
    <span class="dot">...</span>
    <% } %>

    <% for (let i = Math.max(1, currentPage - 2); i <= Math.min(totalPages, currentPage + 2); i++) { %>
    <a class="btn" href="/?page=<%= i %>"><%= i %></a>
    <% } %>

    <% if (currentPage < totalPages - 2) { %>
    <span class="dot">...</span>
    <a class="btn" href="/?page=<%= totalPages %>"><%= totalPages %></a>
    <% } %>

    <% if (hasNext) { %>
    <a class="btn" href="/?page=<%= currentPage + 1 %>">&gt;</a>
    <% } %>
</div>

<%- include('partials/footer.ejs') %>