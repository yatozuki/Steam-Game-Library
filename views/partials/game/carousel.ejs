<div class="content-container visual">
    <div class="carousel-wrapper">
        <div class="carousel-nav prev ">
            <button class="carousel-btn L" aria-label="Previous">&lt;</button>
        </div>

        <div class="main-carousel">

            <% if (game.movies) { %>
                <% game.movies.forEach((movie, i) => { %>
                    <div class="carousel-item" data-index="<%= i %>">
                        <video class="game-video" preload="metadata" controls loading="lazy" playsinline muted poster="<%= game.movies[i].thumbnail %>">
                            <source src="<%= game.movies[i].mp4['480'] %>" type="video/mp4" title="480">
                            <source src="<%= game.movies[i].mp4.max %>" type="video/mp4" title="Full HD">
                            <source src="<%= game.movies[i].webm['480'] %>" type="video/webm" title="480">
                            <source src="<%= game.movies[i].webm.max %>" type="video/webm" title="Full HD">
    
                            Your browser does not support the video tag.
                        </video>
                    </div>
                <% }) %>
            <% } %>

            <% if (game.screenshots) { %>
                <% game.screenshots.forEach((screenshot, i) => { %>
                    <div class="carousel-item" data-index="<%= (game.movies ? game.movies.length : 0) + i %>">
                        <img src="<%= game.screenshots[i].path_thumbnail || game.screenshots[i].path_full %>" alt="<%= game.name %> screenshot <%= i+1 %>" loading="lazy">
                    </div>
                <% }) %>
            <% } %>
            
        </div>

        <div class="carousel-nav next">
            <button class="carousel-btn R" aria-label="Next">&gt;</button>
        </div>

    </div>
    
    <!-- Thumbnail strip -->
    <% if (game.screenshots.length > 0 || game.movies.length > 0) { %>
        <div class="thumbnail-strip-wrapper">
            <div class="thumbnail-strip">
                <% if (game.movies) { %>
                    <% game.movies.forEach((movie, i) => { %>
                        <div class="thumbnail-item" data-index="<%= i %>">
                            <img src="<%= game.movies[i].thumbnail %>" alt="Video thumbnail <%= i+1 %>" loading="lazy">
                            <div class="video-indicator">â–¶</div>
                        </div>
                    <% }) %>
                <% } %>
                <% if (game.screenshots) { %>
                    <% game.screenshots.forEach((screenshot, i) => { %>
                        <div class="thumbnail-item" data-index="<%= (game.movies ? game.movies.length : 0) + i %>">
                            <img src="<%= game.screenshots[i].path_thumbnail || game.screenshots[i].path_full %>" alt="Thumbnail <%= i+1 %>" loading="lazy">
                        </div>
                    <% }) %>
                <% } %>
                
                
            </div>
        </div>

    <% } %>
</div>